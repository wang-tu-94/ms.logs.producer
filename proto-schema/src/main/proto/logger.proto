syntax = "proto3";

// Ces options permettent de générer du code Java propre et facile à utiliser
option java_multiple_files = true;
option java_package = "com.myproject.log.proto";
option java_outer_classname = "LogProto";

package log;

// Le contrat de service
service LogService {
  // Client streaming : le SDK envoie un flux de logs, le serveur répond à la fin
  rpc SendLogs(stream LogMessage) returns (LogSummary);
}

// La structure d'un log
message LogMessage {
  string service_name = 1;
  string level = 2; // INFO, WARN, ERROR
  string content = 3;
  string timestamp = 4;
  map<string, string> metadata = 5;
}

// La réponse du serveur
message LogSummary {
  int32 logs_processed = 1;
  string status = 2;
}